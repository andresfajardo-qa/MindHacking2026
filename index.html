<!DOCTYPE html>
<html lang="es" dir="ltr">
  <head>
    <meta charset="utf-8"/>

    <link rel="stylesheet" href="css/master.css">
    <link href="https://fonts.googleapis.com/css?family=Markazi+Text" rel="stylesheet">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.2/css/bootstrap.min.css">

    <title>Andrew Newman - Mindhacking</title>

    <style>
      #countdown{
       display: inline-block;
        margin-top: 6px;
        transition: opacity 0.6s ease, transform 0.6s ease;
      }

      #countdown.fade-out{
        opacity: 0;
        transform: translateY(4px);
      }
    </style>

  </head>
  
  <body id="cuerpo" class="page-index">

    <!-- HEADER -->
    <div class="container-fluid">
      <div class="row">
        <div class="page-header">
          <a href="index.html">
            <img src="src/img/head.jpg" class="img-fluid mx-auto" alt="Andrew Newman - Mindhacking">
          </a>
        </div>
      </div>

        <a href="javascript:void(0)" class="scroll-hint" id="scrollHint">
          ATRÉVETE A DESAFIAR TU REALIDAD
          <span id="countdown">(9)</span>
        </a>
    </div>

    <!-- MENÚ -->
    <div id="main-menu" class="container-fluid nav-wrap">
      <nav class="nav nav-pills flex-column flex-sm-row nav-mh">

        <a class="text-sm-center nav-link nav-mh-link"
          href="andrewnewman.html">
          Quién es Andrew Newman
        </a>

        <a class="text-sm-center nav-link nav-mh-link"
          href="mindhacking.html">
          Qué es Mindhacking
        </a>

        <a class="text-sm-center nav-link nav-mh-link"
          href="services.html">
          Servicios y eventos
        </a>

        <a class="text-sm-center nav-link nav-mh-link"
            href="contact.html">
          Contacto
        </a>

      </nav>
    </div>

    <!-- SEPARADOR -->
    <div class="line-separator"></div>

    <!-- IMAGEN INDEX -->
    <div class="index-art">
      <a href="andrewnewman.html">
        <picture>
          <!-- Imagen para móvil -->
          <source media="(max-width: 768px)" srcset="src/img/laberintosombra.png">

          <!-- Imagen por defecto (desktop) -->
          <img src="src/img/laberinto.png"
              alt="Laberinto mental Mindhacking"
              class="laberinto-img">
        </picture>
      </a>
    </div>

    <br><br>

   <script>
      document.addEventListener("DOMContentLoaded", function () {
        const secondsStart = 9;

        const hint = document.getElementById("scrollHint");
        const cd = document.getElementById("countdown");
        const menu = document.getElementById("main-menu");
        const art  = document.getElementById("index-art");

        if (!hint || !cd || !menu) return;

        const prefersReducedMotion = window.matchMedia("(prefers-reduced-motion: reduce)").matches;

        function scrollToMenuAndShowArt() {
          // Ajuste fino: separa el menú del borde superior
          const OFFSET = 10; // prueba 0–20

          // Posición real del menú en la página
          const yMenu = menu.getBoundingClientRect().top + window.pageYOffset - OFFSET;

          window.scrollTo({
            top: yMenu,
            behavior: prefersReducedMotion ? "auto" : "smooth"
          });

          // Opcional: si la imagen existe y queda fuera del viewport, baja un pelín más.
          // Esto evita que el menú quede arriba pero la imagen no se vea.
          if (art) {
            setTimeout(() => {
              const artRect = art.getBoundingClientRect();
              const visibleEnough = artRect.top < window.innerHeight && artRect.bottom > 0;

              if (!visibleEnough) {
                // Baja lo necesario para que la parte superior de la imagen entre en pantalla
                const yArt = art.getBoundingClientRect().top + window.pageYOffset - (menu.offsetHeight + 8);
                window.scrollTo({
                  top: yArt,
                  behavior: prefersReducedMotion ? "auto" : "smooth"
                });
              }
            }, prefersReducedMotion ? 0 : 450);
          }
        }

        let seconds = secondsStart;
        cd.textContent = `(${seconds})`;

        let cancelled = false;

        hint.addEventListener("click", function (e) {
          e.preventDefault();
          cancelled = true;
          scrollToMenuAndShowArt();
          cd.textContent = "";
        });

        const tick = setInterval(function () {
          if (cancelled) { clearInterval(tick); return; }

          seconds -= 1;
          cd.textContent = `(${seconds})`;

          if (seconds <= 0) {
            clearInterval(tick);
            scrollToMenuAndShowArt();
            cd.textContent = "";
          }
        }, 1000);
      });
      </script>
     
  </body>
</html>
